<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>邮件发布格式</title>
</head>
<body>
<div style="display: flex">
    <table id="pre-table" cellspacing="0" cellpadding="0" dir="ltr" border="1" style="color: rgb(34, 34, 34); table-layout: fixed; font-size: 10pt; font-family: Arial; width: 0px; border-collapse: collapse; border: none;">
        <colgroup>
            <col width="117" />
            <col width="493" />
        </colgroup>
        <tbody>
        <tr style="height: 21px;">
            <td style="font-family: &quot;Google Sans&quot;, Roboto, RobotoDraft, Helvetica, Arial, sans-serif; margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom; background-color: rgb(255, 242, 204);"></td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom; background-color: rgb(255, 242, 204); font-weight: bold; color: rgb(192, 0, 0); text-align: center;">
                <span class="publishType"></span>
                预发环境
            </td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">项目名称</td>
            <td class="publishName" style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">project</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">发布时间</td>
            <td class="publishTime" style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">time</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">发布环境</td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">预发环境</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">数据库修改内容</td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">无</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">更新内容</td>
            <td class="publishContent" style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">content</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">服务部署顺序</td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">依次执行</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">配置修改内容</td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">无</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">镜像tag</td>
            <td class="publishTag" style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">123</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">项目回滚版本</td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">上一个版本</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">git地址</td>
            <td class="publishGit" style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">git</td>

        </tr>
        </tbody>
    </table>
    <button style="cursor: pointer" onclick="onClick('pre-table')">复制预发邮件</button>
</div>
<br /><br /><br /><br />
<div style="display: flex">
    <table id="production-table" cellspacing="0" cellpadding="0" dir="ltr" border="1" style="color: rgb(34, 34, 34); table-layout: fixed; font-size: 10pt; font-family: Arial; width: 0px; border-collapse: collapse; border: none;">
        <colgroup>
            <col width="117" />
            <col width="493" />
        </colgroup>
        <tbody>
        <tr style="height: 21px;">
            <td style="font-family: &quot;Google Sans&quot;, Roboto, RobotoDraft, Helvetica, Arial, sans-serif; margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom; background-color: rgb(255, 242, 204);"></td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom; background-color: rgb(255, 242, 204); font-weight: bold; color: rgb(192, 0, 0); text-align: center;">
                <span class="publishType"></span>
                生产环境
            </td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">项目名称</td>
            <td class="publishName" style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">project</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">发布时间</td>
            <td class="publishTime" style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">time</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">发布环境</td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">生产环境</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">数据库修改内容</td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">无</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">更新内容</td>
            <td class="publishContent" style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">content</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">服务部署顺序</td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">前端</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">配置修改内容</td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">无</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">镜像tag</td>
            <td class="publishTag" style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">123</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">项目回滚版本</td>
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">上一个版本</td>
        </tr>
        <tr style="height: 21px;">
            <td style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">git地址</td>
            <td class="publishGit" style="margin: 0px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(0, 0, 0) rgb(0, 0, 0) rgb(204, 204, 204); overflow: hidden; padding: 2px 3px; vertical-align: bottom;">git</td>

        </tr>
        </tbody>
    </table>
    <button style="cursor: pointer" onclick="onClick('production-table')">复制生产邮件</button>
</div>
<div style="margin-top: 100px">
    <label>新的「更新内容」:</label>
    <input style="width: 450px" id="input"/>
</div>
<script>

	const onClick = (id)=>{
		const doc = document;
		const text = doc.getElementById( id );
		let range;
		let selection;
		if( doc.body.createTextRange ) {
			range = doc.body.createTextRange();
			range.moveToElement( text );
			range.select();
		} else if ( window.getSelection ) {
			selection = window.getSelection();
			range = doc.createRange();
			range.selectNodeContents( text );
			selection.removeAllRanges();
			selection.addRange( range );
		}
		document.execCommand( 'copy' );
		window.getSelection().removeAllRanges();
	}
	const publishContent = new URLSearchParams(location.search).get('publishContent')
	// &publishName=123&publishContent=content&publishTag=tag&publishGit=git
	const init=()=>{
		const searchParams = new URLSearchParams(location.search);
		const arr = ['publishName','publishTime', 'publishContent', 'publishTag', 'publishGit']

		arr.forEach(key=>{
			let value
			if(key==='publishTime'){
				const da = new Date()
				const month = da.getMonth()+1+'月';
				const date = da.getDate()+'日';
				value = [month,date].join('-')
			}else{
				value =searchParams.get(key)
			}
			document.getElementsByClassName(key)[0].innerHTML=value
			document.getElementsByClassName(key)[1].innerHTML=value
		})

		if(searchParams.get('publishGit')){
			const publishType = (searchParams.get('publishGit').includes('/loan-front')||searchParams.get('publishGit').includes('/loan/operation'))?'前端':'后端'
			document.getElementsByClassName('publishType')[0].innerHTML=publishType
			document.getElementsByClassName('publishType')[1].innerHTML=publishType
		}
	}
	init()

	document.getElementById('input').onchange=function (e){
		const value= e.target.value
        console.log(value)
		const searchParams = new URLSearchParams(location.search);
		searchParams.set('publishContent',value)
		location.search=searchParams.toString()
	}
</script>
</body>
</html>
